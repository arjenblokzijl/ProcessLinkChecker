!function(t){function i(i,e){var r=i.plugins.highlighter,o=i.series[e.seriesIndex],s=o.markerRenderer,l=r.markerRenderer;l.style=s.style,l.lineWidth=s.lineWidth+r.lineWidthAdjust,l.size=s.size+r.sizeAdjust;var a=t.jqplot.getColorComponents(s.color),h=[a[0],a[1],a[2]],n=a[3]>=.6?.6*a[3]:a[3]*(2-a[3]);l.color="rgba("+h[0]+","+h[1]+","+h[2]+","+n+")",l.init();var g=o.gridData[e.pointIndex][0],p=o.gridData[e.pointIndex][1];o.renderer.constructor==t.jqplot.BarRenderer&&("vertical"==o.barDirection?g+=o._barNudge:p-=o._barNudge),l.draw(g,p,r.highlightCanvas._ctx)}function e(i,e,r){var a=i.plugins.highlighter,h=a._tooltipElem,n=e.highlighter||{},g=t.extend(!0,{},a,n);if(g.useAxesFormatters){for(var p,d=e._xaxis._ticks[0].formatter,f=e._yaxis._ticks[0].formatter,u=e._xaxis._ticks[0].formatString,c=e._yaxis._ticks[0].formatString,v=d(u,r.data[0]),x=[],m=1;m<g.yvalues+1;m++)x.push(f(c,r.data[m]));if("string"==typeof g.formatString)switch(g.tooltipAxes){case"both":case"xy":x.unshift(v),x.unshift(g.formatString),p=t.jqplot.sprintf.apply(t.jqplot.sprintf,x);break;case"yx":x.push(v),x.unshift(g.formatString),p=t.jqplot.sprintf.apply(t.jqplot.sprintf,x);break;case"x":p=t.jqplot.sprintf.apply(t.jqplot.sprintf,[g.formatString,v]);break;case"y":x.unshift(g.formatString),p=t.jqplot.sprintf.apply(t.jqplot.sprintf,x);break;default:x.unshift(v),x.unshift(g.formatString),p=t.jqplot.sprintf.apply(t.jqplot.sprintf,x)}else switch(g.tooltipAxes){case"both":case"xy":p=v;for(var m=0;m<x.length;m++)p+=g.tooltipSeparator+x[m];break;case"yx":p="";for(var m=0;m<x.length;m++)p+=x[m]+g.tooltipSeparator;p+=v;break;case"x":p=v;break;case"y":p=x.join(g.tooltipSeparator);break;default:p=v;for(var m=0;m<x.length;m++)p+=g.tooltipSeparator+x[m]}}else{var p;"string"==typeof g.formatString?p=t.jqplot.sprintf.apply(t.jqplot.sprintf,[g.formatString].concat(r.data)):"both"==g.tooltipAxes||"xy"==g.tooltipAxes?p=t.jqplot.sprintf(g.tooltipFormatString,r.data[0])+g.tooltipSeparator+t.jqplot.sprintf(g.tooltipFormatString,r.data[1]):"yx"==g.tooltipAxes?p=t.jqplot.sprintf(g.tooltipFormatString,r.data[1])+g.tooltipSeparator+t.jqplot.sprintf(g.tooltipFormatString,r.data[0]):"x"==g.tooltipAxes?p=t.jqplot.sprintf(g.tooltipFormatString,r.data[0]):"y"==g.tooltipAxes&&(p=t.jqplot.sprintf(g.tooltipFormatString,r.data[1]))}t.isFunction(g.tooltipContentEditor)&&(p=g.tooltipContentEditor(p,r.seriesIndex,r.pointIndex,i)),h.html(p);var j={x:r.gridData[0],y:r.gridData[1]},_=0,w=.707;1==e.markerRenderer.show&&(_=(e.markerRenderer.size+g.sizeAdjust)/2);var q=o;switch(e.fillToZero&&e.fill&&r.data[1]<0&&(q=l),q[s[g.tooltipLocation]]){case"nw":var b=j.x+i._gridPadding.left-h.outerWidth(!0)-g.tooltipOffset-w*_,y=j.y+i._gridPadding.top-g.tooltipOffset-h.outerHeight(!0)-w*_;break;case"n":var b=j.x+i._gridPadding.left-h.outerWidth(!0)/2,y=j.y+i._gridPadding.top-g.tooltipOffset-h.outerHeight(!0)-_;break;case"ne":var b=j.x+i._gridPadding.left+g.tooltipOffset+w*_,y=j.y+i._gridPadding.top-g.tooltipOffset-h.outerHeight(!0)-w*_;break;case"e":var b=j.x+i._gridPadding.left+g.tooltipOffset+_,y=j.y+i._gridPadding.top-h.outerHeight(!0)/2;break;case"se":var b=j.x+i._gridPadding.left+g.tooltipOffset+w*_,y=j.y+i._gridPadding.top+g.tooltipOffset+w*_;break;case"s":var b=j.x+i._gridPadding.left-h.outerWidth(!0)/2,y=j.y+i._gridPadding.top+g.tooltipOffset+_;break;case"sw":var b=j.x+i._gridPadding.left-h.outerWidth(!0)-g.tooltipOffset-w*_,y=j.y+i._gridPadding.top+g.tooltipOffset+w*_;break;case"w":var b=j.x+i._gridPadding.left-h.outerWidth(!0)-g.tooltipOffset-_,y=j.y+i._gridPadding.top-h.outerHeight(!0)/2;break;default:var b=j.x+i._gridPadding.left-h.outerWidth(!0)-g.tooltipOffset-w*_,y=j.y+i._gridPadding.top-g.tooltipOffset-h.outerHeight(!0)-w*_}e.renderer.constructor==t.jqplot.BarRenderer&&("vertical"==e.barDirection?b+=e._barNudge:y-=e._barNudge),h.css("left",b),h.css("top",y),g.fadeTooltip?h.stop(!0,!0).fadeIn(g.tooltipFadeSpeed):h.show(),h=null}function r(t,r,o,s,l){var a=l.plugins.highlighter,h=l.plugins.cursor;if(a.show)if(null==s&&a.isHighlighting){var n=jQuery.Event("jqplotHighlighterUnhighlight");l.target.trigger(n);var g=a.highlightCanvas._ctx;g.clearRect(0,0,g.canvas.width,g.canvas.height),a.fadeTooltip?a._tooltipElem.fadeOut(a.tooltipFadeSpeed):a._tooltipElem.hide(),a.bringSeriesToFront&&l.restorePreviousSeriesOrder(),a.isHighlighting=!1,a.currentNeighbor=null,g=null}else if(null!=s&&l.series[s.seriesIndex].showHighlight&&!a.isHighlighting){var n=jQuery.Event("jqplotHighlighterHighlight");n.which=t.which,n.pageX=t.pageX,n.pageY=t.pageY;var p=[s.seriesIndex,s.pointIndex,s.data,l];l.target.trigger(n,p),a.isHighlighting=!0,a.currentNeighbor=s,a.showMarker&&i(l,s),!l.series[s.seriesIndex].show||!a.showTooltip||h&&h._zoom.started||e(l,l.series[s.seriesIndex],s),a.bringSeriesToFront&&l.moveSeriesToFront(s.seriesIndex)}else if(null!=s&&a.isHighlighting&&a.currentNeighbor!=s&&l.series[s.seriesIndex].showHighlight){var g=a.highlightCanvas._ctx;g.clearRect(0,0,g.canvas.width,g.canvas.height),a.isHighlighting=!0,a.currentNeighbor=s,a.showMarker&&i(l,s),!l.series[s.seriesIndex].show||!a.showTooltip||h&&h._zoom.started||e(l,l.series[s.seriesIndex],s),a.bringSeriesToFront&&l.moveSeriesToFront(s.seriesIndex)}}t.jqplot.eventListenerHooks.push(["jqplotMouseMove",r]),t.jqplot.Highlighter=function(i){this.show=t.jqplot.config.enablePlugins,this.markerRenderer=new t.jqplot.MarkerRenderer({shadow:!1}),this.showMarker=!0,this.lineWidthAdjust=2.5,this.sizeAdjust=5,this.showTooltip=!0,this.tooltipLocation="nw",this.fadeTooltip=!0,this.tooltipFadeSpeed="fast",this.tooltipOffset=2,this.tooltipAxes="both",this.tooltipSeparator=", ",this.tooltipContentEditor=null,this.useAxesFormatters=!0,this.tooltipFormatString="%.5P",this.formatString=null,this.yvalues=1,this.bringSeriesToFront=!1,this._tooltipElem,this.isHighlighting=!1,this.currentNeighbor=null,t.extend(!0,this,i)};var o=["nw","n","ne","e","se","s","sw","w"],s={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7},l=["se","s","sw","w","nw","n","ne","e"];t.jqplot.Highlighter.init=function(i,e,r){var o=r||{};this.plugins.highlighter=new t.jqplot.Highlighter(o.highlighter)},t.jqplot.Highlighter.parseOptions=function(t,i){this.showHighlight=!0},t.jqplot.Highlighter.postPlotDraw=function(){this.plugins.highlighter&&this.plugins.highlighter.highlightCanvas&&(this.plugins.highlighter.highlightCanvas.resetCanvas(),this.plugins.highlighter.highlightCanvas=null),this.plugins.highlighter&&this.plugins.highlighter._tooltipElem&&(this.plugins.highlighter._tooltipElem.emptyForce(),this.plugins.highlighter._tooltipElem=null),this.plugins.highlighter.highlightCanvas=new t.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.highlighter.highlightCanvas.createElement(this._gridPadding,"jqplot-highlight-canvas",this._plotDimensions,this)),this.plugins.highlighter.highlightCanvas.setContext();var i=document.createElement("div");this.plugins.highlighter._tooltipElem=t(i),i=null,this.plugins.highlighter._tooltipElem.addClass("jqplot-highlighter-tooltip"),this.plugins.highlighter._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(this.plugins.highlighter._tooltipElem)},t.jqplot.preInitHooks.push(t.jqplot.Highlighter.init),t.jqplot.preParseSeriesOptionsHooks.push(t.jqplot.Highlighter.parseOptions),t.jqplot.postDrawHooks.push(t.jqplot.Highlighter.postPlotDraw)}(jQuery);
